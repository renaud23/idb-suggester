(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("ERkP")},function(module,exports){module.exports=storybook_docs_dll},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("1t7P")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("IAdD")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("ho0z")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("+KXO")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("jQ/y")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("7x/C")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("M+/F")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("vrRf")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("plBw")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("87if")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("DZ+c")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("lTEL")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("kYxP")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("z84I")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("aLgo")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("cARO")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("2G9S")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("KqXw")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("hCOa")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("NyMY")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("UvmB")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("EgRP")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("yH/f")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("aokA")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("jwue")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("+oxZ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("lN5B")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("LW0h")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("A3UQ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("MvUL")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("7xRU")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("Ysgh")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("KOtZ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("1Iuc")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("P2aG")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("jQ3i")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("ZVkB")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("x4t0")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("y2Ah")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("WNMA")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("Yct5")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("1IsZ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("hBpG")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("vbDw")},,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("JtPf")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("tVqn")},,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("3yYM")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("aYSr")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("5o43")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("DfhM")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("LJOr")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("pu3o")},,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=function(){return new Worker(__webpack_require__.p+"6769a55c79f51412edd1.worker.js")}},,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("LqLs")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("3voH")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("6U7i")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("Cm4o")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("j4Sf")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("LUwd")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("OZaJ")},,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("fRV1")},,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("+kY7")},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("5878")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("Kkar")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("m9LP")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("7nmT")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("l1C2")},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("sVFb")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("iKE+")},,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("CUMQ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("mlET")},,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("f9bD")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("b2e3")},,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){__webpack_require__(189),__webpack_require__(214),__webpack_require__(215),__webpack_require__(261),__webpack_require__(387),__webpack_require__(422),__webpack_require__(427),__webpack_require__(439),__webpack_require__(441),__webpack_require__(443),module.exports=__webpack_require__(445)},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("ARua")},,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("gqY9")},,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("9JhN")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("PjZX")},,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(134)},,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("/Qos")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("JY+C")},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("ZUdG")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("tQbP")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("//nZ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("wFLD")},,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("ax0f")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("dSaG")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("hQin")},,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("LJ7e")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("I2fK")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("DY47")},,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("3kp9")},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("/bc2")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("/JuR")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("+Bxv")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("muFx")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("Wci6")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("WoRU")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("o3fS")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("JmTi")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("xaiR")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("SlD/")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("Monn")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("fmNP")},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("uFXj")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("V0IW")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("OCSl")},,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("jLkM")},,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("kA4r")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("Blm6")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("ssvU")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("lZm3")},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("Ee2X")},,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("5BYb")},,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("F63i")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("aWzz")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("kvVz")},,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("2q8g")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("nDih")},,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _clientApi=__webpack_require__(39),_clientLogger=__webpack_require__(27),_configFilename=__webpack_require__(444);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(_configFilename.args||_configFilename.argTypes)&&_clientLogger.logger.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify({args:_configFilename.args,argTypes:_configFilename.argTypes})),_configFilename.decorators&&_configFilename.decorators.forEach((function(decorator){return(0,_clientApi.addDecorator)(decorator,!1)})),(_configFilename.parameters||_configFilename.globals||_configFilename.globalTypes)&&(0,_clientApi.addParameters)(_objectSpread(_objectSpread({},_configFilename.parameters),{},{globals:_configFilename.globals,globalTypes:_configFilename.globalTypes}),!1),_configFilename.argTypesEnhancers&&_configFilename.argTypesEnhancers.forEach((function(enhancer){return(0,_clientApi.addArgTypesEnhancer)(enhancer)}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"parameters",(function(){return parameters}));var parameters={actions:{argTypesRegex:"^on[A-Z].*"}}},function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(134).configure)([__webpack_require__(446),__webpack_require__(447)],module,!1)}).call(this,__webpack_require__(79)(module))},function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=446},function(module,exports,__webpack_require__){var map={"./stories/store-manager.stories.js":458};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=447},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("ey2t")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)("maj8")},,,,function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"COG",(function(){return store_manager_stories_COG})),__webpack_require__.d(__webpack_exports__,"NAF",(function(){return store_manager_stories_NAF}));var objectSpread2=__webpack_require__(5),regenerator=__webpack_require__(11),regenerator_default=__webpack_require__.n(regenerator),slicedToArray=__webpack_require__(21),asyncToGenerator=__webpack_require__(25),delegated_reactfrom_dll_reference_storybook_docs_dll=__webpack_require__(0),delegated_reactfrom_dll_reference_storybook_docs_dll_default=__webpack_require__.n(delegated_reactfrom_dll_reference_storybook_docs_dll),onRefreshSuggestions=function onRefreshSuggestions(suggestions){return{type:"renaud-suggester/onRefreshSuggestions",payload:{suggestions:suggestions}}},defineProperty=__webpack_require__(36);var get_display_value=function getValue(state){var activeIndex=state.activeIndex,suggestions=state.suggestions,displayPath=state.displayPath,item=suggestions[activeIndex];return displayPath in item?item[displayPath]:item.id};function getInPayload(action){for(var payload=action.payload,_len=arguments.length,attrs=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)attrs[_key-1]=arguments[_key];return attrs.reduce((function(a,attr){return attr in payload?Object(objectSpread2.a)(Object(objectSpread2.a)({},a),{},Object(defineProperty.a)({},attr,payload[attr])):a}),{})}function reduceOnEnterInput(state){var activeIndex=state.activeIndex,suggestions=state.suggestions;if(activeIndex>=0){var inputValue=get_display_value(state);return Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{displayIndex:-1,displayPanel:!1,displayActiveIndex:!1,selectedItem:suggestions[activeIndex],inputValue:inputValue,focused:!0,displayOnRefresh:!1})}return state}var component_state_reducer=function reducer(state,action){switch(action.type){case"renaud-suggester/onInputChange":return function reduceOnInputChange(state,action){var _getInPayload=getInPayload(action,"value","cursorPos"),value=_getInPayload.value,cursorPos=_getInPayload.cursorPos;return Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{displayActiveIndex:!1,inputValue:value,activeIndex:-1,displayOnRefresh:!0,cursorPos:cursorPos})}(state,action);case"renaud-suggester/onRefreshSuggestions":return function reduceOnRefreshSuggestions(state,action){var suggestions=getInPayload(action,"suggestions").suggestions,displayPanel=state.displayOnRefresh&&suggestions.length>0;return Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{displayActiveIndex:!1,suggestions:suggestions,displayPanel:displayPanel,activeIndex:-1})}(state,action);case"renaud-suggester/onBlurSuggester":return function reduceOnBlurSuggester(state){return Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{displayActiveIndex:!1,displayPanel:!1,focused:!1})}(state);case"renaud-suggester/onFocusedSuggester":return function reduceOnFocusedSuggester(state){return Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{displayActiveIndex:!1,displayPanel:!0,focused:!0})}(state);case"renaud-suggester/onArrowUpInput":return function reduceOnKeyUpInput(state){var activeIndex=state.activeIndex;return state.suggestions.length?Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{displayActiveIndex:!0,displayPanel:!0,activeIndex:Math.max(activeIndex-1,0)}):state}(state);case"renaud-suggester/onArrowDownInput":return function reduceOnKeyDownInput(state){var suggestions=state.suggestions,activeIndex=state.activeIndex;return suggestions.length?Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{displayActiveIndex:!0,displayPanel:!0,activeIndex:Math.min(activeIndex+1,suggestions.length-1)}):state}(state);case"renaud-suggester/onMouseEnterOption":return function reduceOnMouseEnterOption(state,action){var index=getInPayload(action,"index").index;return Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{displayActiveIndex:!0,activeIndex:index})}(state,action);case"renaud-suggester/onMouseEnterInputLayer":return function reduceOnMouseEnterInputLayer(state){return Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{displayActiveIndex:!1,activeIndex:-1})}(state);case"renaud-suggester/onEnterInput":return reduceOnEnterInput(state);case"renaud-suggester/onClickOption":return function reduceOnClickOption(state){return reduceOnEnterInput(state)}(state);case"renaud-suggester/onClickDeleteButton":return function reduceOnCLickDeleteButton(state){return Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{displayIndex:-1,displayPanel:!1,suggestions:[],activeInde:-1,displayActiveIndex:!1,selectedItem:void 0,inputValue:"",displayOnRefresh:!1})}(state);case"renaud-suggester/onBlurInput":return function reduceOnBlurInput(state){return Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{focused:!1})}(state);case"renaud-suggester/onEndDownInput":return function reduceOnEndDownInput(state){var suggestions=state.suggestions;return suggestions.length?Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{displayActiveIndex:!0,displayPanel:!0,activeIndex:suggestions.length-1}):state}(state);case"renaud-suggester/onHomeDownInput":return function reduceOnHomeDownInput(state){return state.suggestions.length?Object(objectSpread2.a)(Object(objectSpread2.a)({},state),{},{displayActiveIndex:!0,displayPanel:!0,activeIndex:0}):state}(state);default:return state}},initial_state={placeHolder:"Search...",suggesterFocused:!1,inputValue:"",suggestions:[],displayPanel:!1,focused:!1,activeIndex:-1,selectedItem:void 0,displayActiveIndex:!1,onSelect:function onSelect(){return null},displayOnRefresh:!0,cursorPos:0},SuggesterStateContext=delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createContext({state:{},dispatch:function dispatch(){return null}});SuggesterStateContext.displayName="SuggesterContext";var suggester_state_context=SuggesterStateContext;var use_suggester_state=function useSuggesterState(){var _useContext=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useContext)(suggester_state_context);return[_useContext.state,_useContext.dispatch]};var use_suggester_dispatch=function useIt(){return Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useContext)(suggester_state_context).dispatch},classnames=__webpack_require__(42),classnames_default=__webpack_require__.n(classnames),suggester_container=delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.forwardRef((function SuggesterContainer(_ref,ref){var children=_ref.children,_useSuggesterState=use_suggester_state(),focused=Object(slicedToArray.a)(_useSuggesterState,1)[0].focused;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:classnames_default()("renaud-suggester-container",{focused:focused,unfocused:!focused}),ref:ref},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"renaud-suggester"},children))}));var IDB_REF=function getIDB(){return indexedDB}();var open_storage=function openStorage(name){var version=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(resolve,reject){IDB_REF||reject("indexedDb not supported !");var db,request=IDB_REF.open(name,version),doIt=!0;request.onupgradeneeded=function(){doIt=!1,(db=request.result).createObjectStore(constantes.STORE_NAME,{keyPath:"id"}).createIndex(constantes.STORE_INDEX_NAME,constantes.STORE_INDEX_PATH,{multiEntry:!0}),resolve(db)},request.onsuccess=function(){db=request.result,doIt&&resolve(db)},request.onerror=function(e){reject(e)}}))},MAX_STRING=String.fromCharCode(65535),SEARCH_TYPES={prefix:"search/prefix",tokens:"search/tokens"},constantes={STORE_NAME:"store/entities",STORE_INDEX_NAME:"store/entities/index",STORE_INDEX_PATH:"searching",MAX_STRING:MAX_STRING,SEARCH_TYPES:SEARCH_TYPES},remove_accents=__webpack_require__(68),remove_accents_default=__webpack_require__.n(remove_accents);var prepare_string_indexation=function prepare(){var token=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"==typeof token?remove_accents_default()(token.toLowerCase()).replace(/[- ']/g,""):token},toConsumableArray=__webpack_require__(44),BULK_INSERT_MESSAGES=(__webpack_require__(99),{complete:"bulk-insert/complete",finished:"bulk-insert/finished",error:"bulk-insert/error"});var src=__webpack_require__(98),src_default=__webpack_require__.n(src);function tokensToArray(tokenized){return Object.entries(tokenized).reduce((function(a,_ref){var _ref2=Object(slicedToArray.a)(_ref,2),k=_ref2[0],values=_ref2[1];return k.startsWith("pattern")?[].concat(Object(toConsumableArray.a)(a),"string"==typeof values?[values]:Object(toConsumableArray.a)(values)):a}),[])}var Snowball=__webpack_require__(187),Snowball_default=__webpack_require__.n(Snowball),STEMMERS={};var get_stemmer=function getStemmer(){var language=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"English";if(!(language in STEMMERS)){var stemmer=new Snowball_default.a(language);STEMMERS[language]=function(token){return stemmer.setCurrent(token),stemmer.stem(),stemmer.getCurrent()}}return STEMMERS[language]};function _create(){return(_create=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(name,version){var fields,db,_args=arguments;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return fields=_args.length>2&&void 0!==_args[2]?_args[2]:[],_context.next=3,open_storage(name,version,fields);case 3:return db=_context.sent,_context.abrupt("return",{id:"idb-store/store-index",db:db,name:name,version:version});case 5:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}var create_store=function create(_x,_x2){return _create.apply(this,arguments)};function _clearStore(){return(_clearStore=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(store){var db;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:db=store.db,new Promise((function(resolve){var transaction=db.transaction(constantes.STORE_NAME,"readwrite");transaction.oncomplete=function(){resolve(!0)},transaction.objectStore(constantes.STORE_NAME).clear()}));case 2:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}var clear_store=function clearStore(_x){return _clearStore.apply(this,arguments)};function filter(results,how){var _Object$values=Object.values(results.reduce((function(_ref,o){var _ref2=Object(slicedToArray.a)(_ref,2),stack=_ref2[0],n=_ref2[1],id=o.id;return id in stack||n>=how?[stack,n]:[Object(objectSpread2.a)(Object(objectSpread2.a)({},stack),{},Object(defineProperty.a)({},id,o)),n+1]}),[{},0])),stack=Object(slicedToArray.a)(_Object$values,1)[0];return Object.values(stack)}var search_by_prefix=function search(store){if(store){var db=store.db;return function(){var _ref3=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(prefix,how){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve){if(prefix){var pp=prepare_string_indexation(prefix),index=db.transaction(constantes.STORE_NAME,"readonly").objectStore(constantes.STORE_NAME).index(constantes.STORE_INDEX_NAME),range=IDBKeyRange.bound(pp,"".concat(pp).concat(constantes.MAX_STRING));index.getAll(range).onsuccess=function(req){how&&resolve(filter(req.target.result,how)),resolve(req.target.result)}}else resolve(null)})));case 1:case"end":return _context.stop()}}),_callee)})));return function(_x,_x2){return _ref3.apply(this,arguments)}}()}};function stemAll(tokens,stemmer){return tokens.map((function(token){return stemmer(token)}))}function search_by_tokens_createTokenizer(fields,language){var stemmer=get_stemmer(language),patterns=fields.reduce((function(a,f,i){return f.rules?function mergeToPatterns(p,field){var rules=field.rules,name=field.name;return rules.reduce((function(a,pattern,i){return Object(objectSpread2.a)(Object(objectSpread2.a)({},a),{},Object(defineProperty.a)({},"pattern".concat(name).concat(i),pattern))}),Object(objectSpread2.a)({},p))}(a,f):a}),{});return function(){var query=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",all=src_default()().input(remove_accents_default()(query).toLocaleLowerCase()).tokens(patterns).resolve();return stemAll(tokensToArray(all),stemmer)}}function search_by_tokens_resolve(propositions,how){var map_=propositions.reduce((function(a,suggestions){return suggestions.reduce((function(b,s){var id=s.id;if(id in b){var _b$id=Object(slicedToArray.a)(b[id],2),s_=_b$id[0],_how=_b$id[1];return Object(objectSpread2.a)(Object(objectSpread2.a)({},b),{},Object(defineProperty.a)({},id,[s_,_how+1]))}return Object(objectSpread2.a)(Object(objectSpread2.a)({},b),{},Object(defineProperty.a)({},id,[s,1]))}),Object(objectSpread2.a)({},a))}),{});return Object.values(map_).sort((function(a,b){return a[1]>b[1]?-1:a[1]<b[1]?1:0})).reduce((function(a,_ref){var s=Object(slicedToArray.a)(_ref,1)[0];return a.length<how?[].concat(Object(toConsumableArray.a)(a),[s]):a}),[])}var search_by_tokens=function search_by_tokens_create(store){var fields=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],language=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"French";if(store){var queryParser=search_by_tokens_createTokenizer(fields,language),searching=search_by_prefix(store);return function(){var _ref3=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(query,how){var tokens,suggestions;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return tokens=queryParser(query),_context.next=3,Promise.all(tokens.reduce((function(a,t){return[].concat(Object(toConsumableArray.a)(a),[searching(t,how)])}),[]));case 3:return suggestions=_context.sent,_context.abrupt("return",search_by_tokens_resolve(suggestions,how));case 5:case"end":return _context.stop()}}),_callee)})));return function(_x,_x2){return _ref3.apply(this,arguments)}}()}},STORE_STATUS_failure="store-status/failure",STORE_STATUS_ready="store-status/ready";var store_status=function store_status_status(idbStore){return new Promise((function(resolve,reject){var name=idbStore.name,version=idbStore.version;try{var request=idbStore.transaction(constantes.STORE_NAME,"readonly").objectStore(constantes.STORE_NAME).count();request.onsuccess=function(){resolve({name:name,version:version,count:request.result,status:STORE_STATUS_ready})}}catch(e){resolve({name:name,version:version,status:STORE_STATUS_failure})}}))},bulk_worker=__webpack_require__(94),bulk_worker_default=__webpack_require__.n(bulk_worker);bulk_worker_default.a;function InputLayer(){var _useSuggesterState=use_suggester_state(),_useSuggesterState2=Object(slicedToArray.a)(_useSuggesterState,2),state=_useSuggesterState2[0],dispatch=_useSuggesterState2[1];return state.displayActiveIndex?delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"renaud-suggester-input-layer",onMouseMove:function onMouseMove(e){e.stopPropagation(),dispatch({type:"renaud-suggester/onMouseEnterInputLayer"})}},get_display_value(state)):null}InputLayer.__docgenInfo={description:"",methods:[],displayName:"InputLayer"};var suggester_input_layer=InputLayer;function Icon(_ref){var _ref$width=_ref.width,width=void 0===_ref$width?20:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?20:_ref$height,_ref$color=_ref.color,color=void 0===_ref$color?"rgba(200, 200, 200, 0.8)":_ref$color;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:width,height:height,viewBox:"0 0 30 30"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("path",{fill:color,d:"M7 4a.995.995 0 00-.707.293l-2 2a.999.999 0 000 1.414L11.586 15l-7.293 7.293a.999.999 0 000 1.414l2 2a.999.999 0 001.414 0L15 18.414l7.293 7.293a.999.999 0 001.414 0l2-2a.999.999 0 000-1.414L18.414 15l7.293-7.293a.999.999 0 000-1.414l-2-2a.999.999 0 00-1.414 0L15 11.586 7.707 4.293A.996.996 0 007 4z"}))}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/suggester/suggester-input-layer.js"]={name:"InputLayer",docgenInfo:InputLayer.__docgenInfo,path:"src/suggester/suggester-input-layer.js"}),Icon.__docgenInfo={description:"",methods:[],displayName:"Icon",props:{width:{defaultValue:{value:"20",computed:!1},required:!1},height:{defaultValue:{value:"20",computed:!1},required:!1},color:{defaultValue:{value:'"rgba(200, 200, 200, 0.8)"',computed:!1},required:!1}}};var delete_icon=Icon;function SuggesterButtonDelete(){var dispatch=use_suggester_dispatch();return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"renaud-suggester-button-delete",tabIndex:"0",onClick:function onClick(e){dispatch({type:"renaud-suggester/onClickDeleteButton"})}},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(delete_icon,{width:10,height:10}))}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/suggester/delete.icon.js"]={name:"Icon",docgenInfo:Icon.__docgenInfo,path:"src/suggester/delete.icon.js"}),SuggesterButtonDelete.__docgenInfo={description:"",methods:[],displayName:"SuggesterButtonDelete"};var suggester_button_delete=SuggesterButtonDelete;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/suggester/suggester-button-delete.js"]={name:"SuggesterButtonDelete",docgenInfo:SuggesterButtonDelete.__docgenInfo,path:"src/suggester/suggester-button-delete.js"});var on_select=function on_select_onSelect(state){var onSelect=state.onSelect,suggestions=state.suggestions,activeIndex=state.activeIndex,inputValue=state.inputValue;activeIndex>=0&&onSelect(suggestions[activeIndex],suggestions,inputValue)},KEY_BIND_arrowUp="ArrowUp",KEY_BIND_arrowDown="ArrowDown",KEY_BIND_home="Home",KEY_BIND_end="End",KEY_BIND_tab="Tab",KEY_BIND_enter="Enter";function Input(){var _useSuggesterState=use_suggester_state(),_useSuggesterState2=Object(slicedToArray.a)(_useSuggesterState,2),state=_useSuggesterState2[0],dispatch=_useSuggesterState2[1],focused=state.focused,inputValue=state.inputValue,placeHolder=state.placeHolder,cursorPos=state.cursorPos,inputEl=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useRef)();return Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useEffect)((function(){if(inputEl.current){var where=inputEl.current.selectionStart;cursorPos!==where&&"function"==typeof inputEl.current.setSelectionRange&&inputEl.current.setSelectionRange(cursorPos,cursorPos)}}),[inputEl,cursorPos]),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:classnames_default()("renaud-suggester-input-container",{focused:focused})},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("input",{type:"text",ref:inputEl,autoComplete:"list",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",placeholder:placeHolder,onChange:function onChange(e){e.preventDefault(),e.stopPropagation(),dispatch(function onInputChange(value,cursorPos){return{type:"renaud-suggester/onInputChange",payload:{value:value,cursorPos:cursorPos}}}(e.target.value,e.target.selectionStart))},value:inputValue,className:"renaud-suggester-input",onFocus:function onFocus(e){e.preventDefault(),e.stopPropagation(),dispatch({type:"renaud-suggester/onFocusedSuggester"})},onBlur:function onBlur(e){e.preventDefault(),e.stopPropagation(),dispatch({type:"renaud-suggester/onBlurInput"})},onKeyDown:function handleKeyPressed(e){switch(e.stopPropagation(),e.key){case KEY_BIND_arrowUp:e.preventDefault(),dispatch({type:"renaud-suggester/onArrowUpInput"});break;case KEY_BIND_arrowDown:e.preventDefault(),dispatch({type:"renaud-suggester/onArrowDownInput"});break;case KEY_BIND_enter:on_select(state),dispatch({type:"renaud-suggester/onEnterInput"});break;case KEY_BIND_tab:dispatch({type:"renaud-suggester/onBlurSuggester"});break;case KEY_BIND_home:dispatch({type:"renaud-suggester/onHomeDownInput"});break;case KEY_BIND_end:dispatch({type:"renaud-suggester/onEndDownInput"})}}}),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(suggester_input_layer,null),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(suggester_button_delete,null))}Input.__docgenInfo={description:"",methods:[],displayName:"Input"};var suggester_input=Input;function OptionContainer(_ref){var children=_ref.children,index=_ref.index,_useSuggesterState=use_suggester_state(),_useSuggesterState2=Object(slicedToArray.a)(_useSuggesterState,2),state=_useSuggesterState2[0],dispatch=_useSuggesterState2[1],activeIndex=state.activeIndex,selectedItem=state.selectedItem,suggestions=state.suggestions,active=index===activeIndex,selected=!(!selectedItem||selectedItem.id!==suggestions[index].id),handleMouseEnter=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),dispatch(function onMouseEnterOption(index){return{type:"renaud-suggester/onMouseEnterOption",payload:{index:index}}}(index))}),[index,dispatch]);return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("li",{className:classnames_default()("renaud-suggestion-option",{active:active,selected:selected}),onClick:function onClick(e){e.stopPropagation(),e.preventDefault(),0===e.button&&(on_select(state),dispatch({type:"renaud-suggester/onClickOption"}))},onMouseEnter:handleMouseEnter},children)}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/suggester/suggester-input.js"]={name:"Input",docgenInfo:Input.__docgenInfo,path:"src/suggester/suggester-input.js"}),OptionContainer.defaultProps={onSelect:function onSelect(){return null}},OptionContainer.__docgenInfo={description:"",methods:[],displayName:"OptionContainer",props:{onSelect:{defaultValue:{value:"() => null",computed:!1},required:!1}}};var suggester_option_container=OptionContainer;function PanelContent(_ref){var suggestions=_ref.suggestions,Component=_ref.optionComponent;return _ref.display?delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("ul",{className:classnames_default()("renaud-suggester-panel")},suggestions.map((function(s,i){var id=s.id;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(suggester_option_container,{key:id,item:s,index:i},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(Component,{suggestion:s}))}))):null}function Panel(_ref2){var optionComponent=_ref2.optionComponent,_useSuggesterState=use_suggester_state(),state=Object(slicedToArray.a)(_useSuggesterState,1)[0],suggestions=state.suggestions,displayPanel=state.displayPanel;return suggestions.length?delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:classnames_default()("renaud-suggester-panel-container",{display:displayPanel,hide:!displayPanel})},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(PanelContent,{suggestions:suggestions,optionComponent:optionComponent,display:displayPanel})):null}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/suggester/suggester-option-container.js"]={name:"OptionContainer",docgenInfo:OptionContainer.__docgenInfo,path:"src/suggester/suggester-option-container.js"}),Panel.__docgenInfo={description:"",methods:[],displayName:"Panel"};var suggester_panel=Panel;function Option(_ref){var id=_ref.suggestion.id;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("span",null,id)}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/suggester/suggester-panel.js"]={name:"Panel",docgenInfo:Panel.__docgenInfo,path:"src/suggester/suggester-panel.js"}),Option.__docgenInfo={description:"",methods:[],displayName:"Option"};var suggester_option_default=Option;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/suggester/suggester-option-default.js"]={name:"Option",docgenInfo:Option.__docgenInfo,path:"src/suggester/suggester-option-default.js"});__webpack_require__(454);function refreshSuggestion(_x,_x2,_x3){return _refreshSuggestion.apply(this,arguments)}function _refreshSuggestion(){return(_refreshSuggestion=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(prefix,searching,how){return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!prefix.trim().length){_context2.next=6;break}return _context2.next=3,searching(prefix,how);case 3:return _context2.abrupt("return",_context2.sent);case 6:return _context2.abrupt("return",[]);case 7:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}function Suggester(_ref){var store=_ref.store,optionComponent=_ref.optionComponent,displayPath=_ref.displayPath,onSelect=_ref.onSelect,how=_ref.how,searchType=_ref.searchType,fields=_ref.fields,placeHolder=_ref.placeHolder,language=_ref.language,containerEl=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useRef)(),_useReducer=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useReducer)(component_state_reducer,Object(objectSpread2.a)(Object(objectSpread2.a)({},initial_state),{},{onSelect:onSelect,displayPath:displayPath,placeHolder:placeHolder})),_useReducer2=Object(slicedToArray.a)(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1],_useState=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useState)({dispatch:dispatch,state:state}),_useState2=Object(slicedToArray.a)(_useState,2),context=_useState2[0],setContext=_useState2[1],inputValue=state.inputValue,searching=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useMemo)((function(){return function getSearch(type){return type===SEARCH_TYPES.tokens?search_by_tokens:search_by_prefix}(searchType)(store,fields,language)}),[fields,store,searchType,language]);return Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useEffect)((function(){function _doRefresh(){return(_doRefresh=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){var suggestions;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if("function"!=typeof searching){_context.next=5;break}return _context.next=3,refreshSuggestion(inputValue,searching,how);case 3:suggestions=_context.sent,dispatch(onRefreshSuggestions(suggestions));case 5:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}!function doRefresh(){return _doRefresh.apply(this,arguments)}()}),[inputValue,searching,how]),Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useEffect)((function(){setContext({dispatch:dispatch,state:state})}),[dispatch,state]),Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useEffect)((function(){function handleClickBody(e){containerEl.current&&(containerEl.current.contains(e.target)||dispatch({type:"renaud-suggester/onBlurSuggester"}))}return document.body.addEventListener("click",handleClickBody),function(){document.body.removeEventListener("click",handleClickBody)}}),[containerEl]),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(suggester_state_context.Provider,{value:context},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(suggester_container,{ref:containerEl},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(suggester_input,null),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(suggester_panel,{optionComponent:optionComponent})))}Suggester.defaultProps={optionComponent:suggester_option_default,displayPath:"id",how:15,searchType:SEARCH_TYPES.prefix,placeHolder:"Search...",language:"French"},Suggester.__docgenInfo={description:"",methods:[],displayName:"Suggester",props:{optionComponent:{defaultValue:{value:"OptionDefault",computed:!0},type:{name:"elementType"},required:!1,description:""},displayPath:{defaultValue:{value:"'id'",computed:!1},type:{name:"string"},required:!1,description:""},how:{defaultValue:{value:"15",computed:!1},type:{name:"number"},required:!1,description:""},searchType:{defaultValue:{value:"SEARCH_TYPES.prefix",computed:!0},required:!1},placeHolder:{defaultValue:{value:"'Search...'",computed:!1},type:{name:"string"},required:!1,description:""},language:{defaultValue:{value:"'French'",computed:!1},type:{name:"string"},required:!1,description:""},store:{type:{name:"custom",raw:"function (props, propName, componentName) {\n  if (!(propName in props)) {\n    return new Error('Store is required !');\n  }\n  const { id } = props[propName];\n  if (!id || id !== ID_STORE_IDENTIFIER) {\n    return new Error('Not a valid store !');\n  }\n}"},required:!1,description:""}}};var suggester=Suggester;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/suggester/suggester.js"]={name:"Suggester",docgenInfo:Suggester.__docgenInfo,path:"src/suggester/suggester.js"});var worker_bulk_insert=function bulk_insert_create(){var callback=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},worker=new bulk_worker_default.a;return worker.addEventListener("message",(function(e){callback(e.data)})),function(idbName,fields,entities){var tokenize=arguments.length>3&&void 0!==arguments[3]&&arguments[3];worker.postMessage({idbName:idbName,entities:entities,fields:fields,tokenize:tokenize})}};__webpack_require__(455);function _loadTask(){return(_loadTask=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(data,idbName,fields,tokenize){var process,_args=arguments;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:process=_args.length>4&&void 0!==_args[4]?_args[4]:function(){return null},idbName&&worker_bulk_insert(process)(idbName,fields,data,tokenize);case 2:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function BulkTaskProgress(_ref){var idbName=_ref.idbName,_ref$data=_ref.data,data=void 0===_ref$data?[]:_ref$data,_ref$fields=_ref.fields,fields=void 0===_ref$fields?[]:_ref$fields,_ref$finished=_ref.finished,finished=void 0===_ref$finished?function(){return null}:_ref$finished,_ref$tokenize=_ref.tokenize,tokenize=void 0!==_ref$tokenize&&_ref$tokenize,ref=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useRef)(),_useState=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useState)(0),_useState2=Object(slicedToArray.a)(_useState,2),statusWidth=_useState2[0],setStatusWidth=_useState2[1],_useState3=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useState)(data.length),nbToLoad=Object(slicedToArray.a)(_useState3,1)[0],_useState5=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useState)(!1),_useState6=Object(slicedToArray.a)(_useState5,2),complete=_useState6[0],setComplete=_useState6[1],_useState7=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useState)(0),_useState8=Object(slicedToArray.a)(_useState7,2),nbTreated=_useState8[0],setNbTreated=_useState8[1];Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useEffect)((function(){ref.current&&setStatusWidth(ref.current.clientWidth)}),[ref]),Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useEffect)((function(){!function loadTask(_x,_x2,_x3,_x4){return _loadTask.apply(this,arguments)}(data,idbName,fields,tokenize,(function callback(args){switch(args.message){case BULK_INSERT_MESSAGES.complete:var treated=args.treated;setNbTreated(treated);break;case BULK_INSERT_MESSAGES.finished:setComplete(!0),finished()}}))}),[data,idbName,fields,finished,tokenize]);var percent=nbTreated/(nbToLoad+1),width=Math.trunc(statusWidth*percent)-1,status=complete?"100 %":"".concat(Math.trunc(100*percent)," %");return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"bulk-insert-progress",ref:ref},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("span",{className:"progress",style:{width:width}}),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("span",{className:"status"},status))}BulkTaskProgress.__docgenInfo={description:"",methods:[],displayName:"BulkTaskProgress",props:{data:{defaultValue:{value:"[]",computed:!1},required:!1},fields:{defaultValue:{value:"[]",computed:!1},required:!1},finished:{defaultValue:{value:"() => null",computed:!1},required:!1},tokenize:{defaultValue:{value:"false",computed:!1},required:!1}}};var bulk_task_progress=BulkTaskProgress;function StoreManagerTitle(_ref){var title=_ref.title,children=_ref.children;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.Fragment,null,delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"store-manager-title"},title),children)}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/store-manager/bulk-task-progress.js"]={name:"BulkTaskProgress",docgenInfo:BulkTaskProgress.__docgenInfo,path:"src/store-manager/bulk-task-progress.js"}),StoreManagerTitle.__docgenInfo={description:"",methods:[],displayName:"StoreManagerTitle"};var store_manager_title=StoreManagerTitle;function Info(_ref){var label=_ref.label,children=_ref.children;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"store-status-info"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("span",{className:"label"},label),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("span",{className:"value"},children))}function StoreStatus(_ref2){var status=_ref2.status;if(!status)return null;var count=status.count,state=status.status,name=status.name,version=status.version;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(store_manager_title,{title:"STATUS"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"store-status"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(Info,{label:"NAME"},name),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(Info,{label:"VERSION"},version),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(Info,{label:"COUNT"},count||"-"),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(Info,{label:"STATUS"},state)))}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/store-manager/store-manager-title.js"]={name:"StoreManagerTitle",docgenInfo:StoreManagerTitle.__docgenInfo,path:"src/store-manager/store-manager-title.js"}),StoreStatus.__docgenInfo={description:"",methods:[],displayName:"StoreStatus"};var store_manager_status=StoreStatus;function Button(_ref){var _ref$onClick=_ref.onClick,onClick=void 0===_ref$onClick?function(){return null}:_ref$onClick,children=_ref.children,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("button",{className:classnames_default()("store-button",{disabled:disabled}),onClick:disabled?function(){return null}:onClick},children)}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/store-manager/store-manager-status.js"]={name:"StoreStatus",docgenInfo:StoreStatus.__docgenInfo,path:"src/store-manager/store-manager-status.js"}),Button.__docgenInfo={description:"",methods:[],displayName:"Button",props:{onClick:{defaultValue:{value:"() => null",computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},required:!1}}};var store_button=Button;function Separator(){return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("span",{className:"store-manager-separator"})}function ActionLoad(_ref){var status=_ref.status,fetch=_ref.fetch,fields=_ref.fields,onStartLoad=_ref.onStartLoad,onEndLoad=_ref.onEndLoad,tokenize=_ref.tokenize,_useState=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useState)(!1),_useState2=Object(slicedToArray.a)(_useState,2),load=_useState2[0],setLoad=_useState2[1],_useState3=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useState)(void 0),_useState4=Object(slicedToArray.a)(_useState3,2),data=_useState4[0],setData=_useState4[1],handleLoad=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useCallback)((function(e){e.stopPropagation(),Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.t0=setData,_context.next=3,fetch();case 3:_context.t1=_context.sent,(0,_context.t0)(_context.t1),onStartLoad(),setLoad(!0);case 7:case"end":return _context.stop()}}),_callee)})))()}),[fetch,onStartLoad]),name=status.name,state=status.status,count=status.count;return load&&data||state!==STORE_STATUS_ready?delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(bulk_task_progress,{idbName:name,data:data,fields:fields,tokenize:tokenize,finished:function finished(){setLoad(!1),onEndLoad()}}):delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(store_button,{onClick:handleLoad,disabled:count>0},"Load")}function ActionClear(_ref3){var name=_ref3.name,version=_ref3.version,_ref3$disabled=_ref3.disabled,disabled=void 0!==_ref3$disabled&&_ref3$disabled,refresh=_ref3.refresh,handleClear=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useCallback)((function(e){e.stopPropagation(),Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(){return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.t0=clear_store,_context2.next=3,create_store(name,version);case 3:return _context2.t1=_context2.sent,_context2.next=6,(0,_context2.t0)(_context2.t1);case 6:refresh();case 7:case"end":return _context2.stop()}}),_callee2)})))()}),[name,refresh,version]);return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(store_button,{onClick:handleClear,disabled:disabled},"Clear")}function StoreManagerActions(_ref5){var status=_ref5.status,fields=_ref5.fields,fetch=_ref5.fetch,refresh=_ref5.refresh,tokenize=_ref5.tokenize,_useState5=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useState)(!1),_useState6=Object(slicedToArray.a)(_useState5,2),load=_useState6[0],setLoad=_useState6[1],onEndLoad=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useCallback)((function(){setLoad(!1),refresh()}),[refresh]);if(!status)return null;var name=status.name,version=status.version;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(store_manager_title,{title:"ACTIONS"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"store-manager-actions-container"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(ActionLoad,{tokenize:tokenize,status:status,fetch:fetch,fields:fields,onStartLoad:function onStartLoad(){setLoad(!0)},onEndLoad:onEndLoad}),load?null:delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.Fragment,null,delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(Separator,null),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(ActionClear,{disabled:!1,name:name,version:version,refresh:refresh}))))}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/store-manager/store-button.js"]={name:"Button",docgenInfo:Button.__docgenInfo,path:"src/store-manager/store-button.js"}),StoreManagerActions.__docgenInfo={description:"",methods:[],displayName:"StoreManagerActions"};var store_manager_actions=StoreManagerActions;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/store-manager/store-manager-actions.js"]={name:"StoreManagerActions",docgenInfo:StoreManagerActions.__docgenInfo,path:"src/store-manager/store-manager-actions.js"});__webpack_require__(456);function StoreManager(_ref){var name=_ref.name,version=_ref.version,fields=_ref.fields,fetch=_ref.fetch,_ref$tokenize=_ref.tokenize,tokenize=void 0!==_ref$tokenize&&_ref$tokenize,_useState=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useState)(void 0),_useState2=Object(slicedToArray.a)(_useState,2),store=_useState2[0],setStore=_useState2[1],_useState3=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useState)(void 0),_useState4=Object(slicedToArray.a)(_useState3,2),status=_useState4[0],setStatus=_useState4[1];Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useEffect)((function(){try{Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.t0=setStore,_context.next=3,open_storage(name,version);case 3:_context.t1=_context.sent,(0,_context.t0)(_context.t1);case 5:case"end":return _context.stop()}}),_callee)})))()}catch(e){}}),[name,version]),Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useEffect)((function(){store&&Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(){return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.t0=setStatus,_context2.next=3,store_status(store);case 3:_context2.t1=_context2.sent,(0,_context2.t0)(_context2.t1);case 5:case"end":return _context2.stop()}}),_callee2)})))()}),[store]);var refresh=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useCallback)((function(){Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee3(){return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.t0=setStatus,_context3.next=3,store_status(store);case 3:_context3.t1=_context3.sent,(0,_context3.t0)(_context3.t1);case 5:case"end":return _context3.stop()}}),_callee3)})))()}),[store]);return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"store-manager"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(store_manager_status,{status:status}),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(store_manager_actions,{tokenize:tokenize,store:store,fields:fields,status:status,fetch:fetch,refresh:refresh}))}StoreManager.__docgenInfo={description:"",methods:[],displayName:"StoreManager",props:{tokenize:{defaultValue:{value:"false",computed:!1},required:!1}}};var store_manager_store_manager=StoreManager;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/store-manager/store-manager.js"]={name:"StoreManager",docgenInfo:StoreManager.__docgenInfo,path:"src/store-manager/store-manager.js"});__webpack_require__(457);function fetchCommunes(){return _fetchCommunes.apply(this,arguments)}function _fetchCommunes(){return(_fetchCommunes=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee3(){var communes;return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,fetch("/communes-2019.json").then((function(data){return data.json()}));case 2:return communes=_context3.sent,_context3.abrupt("return",communes.map((function(commune,i){var com=commune.com;return Object(objectSpread2.a)(Object(objectSpread2.a)({},commune),{},{id:"COM-".concat(i,"-").concat(com)})})));case 4:case"end":return _context3.stop()}}),_callee3)})))).apply(this,arguments)}function fetchNaf(){return _fetchNaf.apply(this,arguments)}function _fetchNaf(){return(_fetchNaf=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee4(){var postes;return regenerator_default.a.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,fetch("/naf.json").then((function(data){return data.json()}));case 2:return postes=_context4.sent,_context4.abrupt("return",postes.map((function(naf,i){var code=naf.code;return Object(objectSpread2.a)(Object(objectSpread2.a)({},naf),{},{id:"NAF-".concat(i,"-").concat(code)})})));case 4:case"end":return _context4.stop()}}),_callee4)})))).apply(this,arguments)}var COG_FIELDS=[{name:"libelle"},{name:"com"},{name:"nccenr"}],NAF_FIELDS=[{name:"libelle",rules:[/[\w]+/],language:"French",min:3,stopWords:["alors","au","aucuns","aussi","autre","avant","avec","avoir","bon","car","ce","cela","ces","ceux","chaque","ci","comme","comment","dans","des","du","dedans","dehors","depuis","devrait","doit","donc","dos","debut","elle","elles","en","encore","essai","est","et","eu","fait","faites","fois","font","hors","ici","il","ils","je","juste","le","les","leur","la","ma","maintenant","mais","mes","mien","moins","mon","mot","meme","ni","nommes","notre","nous","ou","par","parce","pas","peut","peu","plupart","pour","pourquoi","quand","que","quel","quelle","quelles","quels","qui","sa","sans","ses","seulement","si","sien","son","sont","sous","soyez","sujet","sur","ta","tandis","tellement","tels","tes","ton","tous","tout","trop","tres","tu","voient","vont","votre","vous","vu","ca","etaient","etat","etions","ete","etre"]},{name:"code"}];function CustomCOGOption(_ref){var suggestion=_ref.suggestion,com=suggestion.com,libelle=suggestion.libelle;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"custom-cog-option"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("span",{className:"com"},com),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("span",{className:"libelle"},libelle))}function CustomNafOption(_ref2){var suggestion=_ref2.suggestion,code=suggestion.code,libelle=suggestion.libelle,poste=suggestion.poste;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"custom-naf-option"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("span",{className:classnames_default()("code",poste),title:poste},code),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("span",{className:"libelle"},libelle))}var store_manager_stories_COG=function COG(){var _useState=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useState)(void 0),_useState2=Object(slicedToArray.a)(_useState,2),store=_useState2[0],setStore=_useState2[1];return Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useEffect)((function(){function _init(){return(_init=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.t0=setStore,_context.next=3,create_store("TEST/COG",1,COG_FIELDS);case 3:_context.t1=_context.sent,(0,_context.t0)(_context.t1);case 5:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}!function init(){return _init.apply(this,arguments)}()}),[]),store?delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.Fragment,null,delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{style:{width:"280px"}},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(suggester,{store:store,placeHolder:"Rechercher dans le COG.",optionComponent:CustomCOGOption,displayPath:"libelle",onSelect:function onSelect(item,all,query){console.log("onSelect",item,all,query)}})),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(store_manager_store_manager,{name:"TEST/COG",version:1,fields:COG_FIELDS,fetch:fetchCommunes})):null},store_manager_stories_NAF=function NAF(){var _useState3=Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useState)(void 0),_useState4=Object(slicedToArray.a)(_useState3,2),store=_useState4[0],setStore=_useState4[1];return Object(delegated_reactfrom_dll_reference_storybook_docs_dll.useEffect)((function(){function _init2(){return(_init2=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(){return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.t0=setStore,_context2.next=3,create_store("TEST/NAF",1,NAF_FIELDS);case 3:_context2.t1=_context2.sent,(0,_context2.t0)(_context2.t1);case 5:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}!function init(){return _init2.apply(this,arguments)}()}),[]),store?delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.Fragment,null,delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{style:{width:"380px"}},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(suggester,{store:store,displayPath:"libelle",placeHolder:"Recherche dans la naf.",optionComponent:CustomNafOption,onSelect:function onSelect(item,all,query){console.log("onSelect naf",item,all,query)},searchType:SEARCH_TYPES.tokens,fields:NAF_FIELDS})),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(store_manager_store_manager,{name:"TEST/NAF",tokenize:!0,version:1,fields:NAF_FIELDS,fetch:fetchNaf})):null};__webpack_exports__.default={title:"Store/create",component:store_manager_store_manager,argTypes:{}};store_manager_stories_COG.parameters=Object(objectSpread2.a)({storySource:{source:"function COG() {\n  const [store, setStore] = useState(undefined);\n  useEffect(function () {\n    async function init() {\n      setStore(await createStore(COG_IDB_NAME, 1, COG_FIELDS));\n    }\n\n    init();\n  }, []);\n  if (!store) {\n    return null;\n  }\n  return (\n    <>\n      <div style={{ width: '280px' }}>\n        <Suggester\n          store={store}\n          placeHolder=\"Rechercher dans le COG.\"\n          optionComponent={CustomCOGOption}\n          displayPath=\"libelle\"\n          onSelect={function (item, all, query) {\n            console.log('onSelect', item, all, query);\n          }}\n        />\n      </div>\n      <StoreManager name={COG_IDB_NAME} version={1} fields={COG_FIELDS} fetch={fetchCommunes} />\n    </>\n  );\n}"}},store_manager_stories_COG.parameters),store_manager_stories_NAF.parameters=Object(objectSpread2.a)({storySource:{source:"function NAF() {\n  const [store, setStore] = useState(undefined);\n  useEffect(function () {\n    async function init() {\n      setStore(await createStore(NAF_IDB_NAME, 1, NAF_FIELDS));\n    }\n\n    init();\n  }, []);\n  if (!store) {\n    return null;\n  }\n  return (\n    <>\n      <div style={{ width: '380px' }}>\n        <Suggester\n          store={store}\n          displayPath=\"libelle\"\n          placeHolder=\"Recherche dans la naf.\"\n          optionComponent={CustomNafOption}\n          onSelect={function (item, all, query) {\n            console.log('onSelect naf', item, all, query);\n          }}\n          searchType={SEARCH_TYPES.tokens}\n          fields={NAF_FIELDS}\n        />\n      </div>\n      <StoreManager\n        name={NAF_IDB_NAME}\n        tokenize={true}\n        version={1}\n        fields={NAF_FIELDS}\n        fetch={fetchNaf}\n      />\n    </>\n  );\n}"}},store_manager_stories_NAF.parameters),store_manager_stories_COG.__docgenInfo={description:"",methods:[],displayName:"COG"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/store-manager.stories.js"]={name:"COG",docgenInfo:store_manager_stories_COG.__docgenInfo,path:"src/stories/store-manager.stories.js"}),store_manager_stories_NAF.__docgenInfo={description:"",methods:[],displayName:"NAF"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/store-manager.stories.js"]={name:"NAF",docgenInfo:store_manager_stories_NAF.__docgenInfo,path:"src/stories/store-manager.stories.js"})}],[[188,1,2]]]);
//# sourceMappingURL=main.53c8c45ecbdd20ab3edf.bundle.js.map